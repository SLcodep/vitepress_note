---
title: js原理部分
date: 2025-11-28 17:58:41
permalink: /qianduan/yuanli
categories:
  - 前端
  - javascript
tags:
  - javascript
---

::: details 💡 内容大纲

JS原理部分主要是针对JS执行过程中必备的部分进行理解
- 原型、原型链
- 执行上下文/作用域/闭包
- 面向对象
- 垃圾回收
- this
:::

## 面向对象
## 原型
[参考内容-从原型到原型链](https://blog.csdn.net/weixin_41784648/article/details/108252962?spm=1001.2014.3001.5506)

在《李兵-图解GoogleV8》他讲到JS采用基于原型继承的设计。在面对一个重要概念时首先要清晰它的创造意义和作用？在JS中最常接触到关于原型的内容应该是**构建函数**。

```js
function DogFactory(type, color) {
  this.type = type
  this.color = color
}
const dog1 = new DogFactory('Dog', 'Black')
```
从这里能看出我创建了一个dog1对象，它能“继承”函数DogFactory的方法和属性。但是有一个问题就是实例和构造函数它们的关系是什么？
### 什么是原型？
我们先从一个构建函数来看，每个函数都有一个特殊的属性叫作原型（prototype），这个属性指向调用该构造函数而创建的实例的原型。原型对象中有一个属性 constructor, 它指向函数对象。
- 构造函数的原型(`Person.prototype`),是一个对象，用于存储所有实例共享的方法 / 属性
- 实例的原型`person.__proto__`,是实例的一个内部属性，指向其构造函数的 prototype 对象

![原型](/qian/原型.png)

### **什么是__proto__?**
从上面的图中我们想要让被创建的实例，能找到它的原型。每一个 JavaScript 对象( null 除外)都有一个属性，叫 __proto__ ,这个属性指向该对象的原型。**用new Person()创建实例person时,将实例 person 的__proto__属性，指向其构造函数 Person 的 prototype 对象。**
```js
function Person() {

}
var person = new Person();
console.log(person.__proto__ === Person.prototype); // true
```
### constructor
原型是否有属性指向构造函数或者实例呢？指向实例倒是没有，因为一个构造函数可以生成多个实例，但是原型指向构造函数倒是有的，这就要讲到第三个属性：constructor，每个原型都有一个 constructor 属性指向关联的构造函数。
```js
function Person() {

}
console.log(Person === Person.prototype.constructor); // true
```

### 怎么理解Function.__proto__===Function.prototype？ 
`Function`作为一个内置对象，是运行前就已经存在的东西，所以根本就不会根据自己生成自己，所以就没有什么鸡生蛋蛋生鸡，就是鸡生蛋。就是先有的`Function`，然后实现上把原型指向了`Function.prototype`，但是我们不能倒过来推测因为`Function.__proto__ === Function.prototype`，所以`Function`调用了自己生成了自己
。
![原型的原型](/qian/原型的原型.png)

从上面的图中我们就行看明白很多问题。
```js

foo.prototype.__proto__ === Object.prototype
Object.prototype.__proto__ === null   //Object.prototype没有原型
```

## 执行上下文
## 作用域
**作用域是指在程序中定义变量的区域，该位置决定了变量的生命周期。通俗地理解，作用域就是变量与函数的可访问范围，即作用域控制着变量和函数的可见性和生命周期。**

ES6中新加入块级作用域,ES的作用域就有了全局作用域、函数作用域和块级作用域。
ES6还引入let和const解决var的变量提升的问题。


## this
JavaScript 执行一段可执行代码时，会创建对应的执行上下文，那么每个执行上下文中都有哪些内容？
执行上下文 3 个重要的属性:
  - 变量对象(Variable Object，VO)
  - 作用域链(Scope Chain)
  - this

**this是和执行上下文绑定的，也就是说每个执行上下文中都有一个this。** 重点讲解下**全局执行上下文中的this**和**函数执行上下文中的this**。



## 闭包
## 垃圾回收
### 面试题目
#### 1.什么是内存泄漏？
#### 2.垃圾回收有哪些办法？
