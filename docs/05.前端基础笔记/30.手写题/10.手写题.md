---
title: æ‰‹å†™é¢˜
date: 2025-11-27 17:24:35
permalink: /qian/write
# titleTag: 
categories:
  - å‰ç«¯
tags:
  - å‰ç«¯
---

è¿™ä¸ªæ–‡æ¡£ä¸»è¦æ˜¯é’ˆå¯¹å‰ç«¯çš„é¢è¯•æ‰‹å†™é¢˜è¿›è¡Œæ•´ç†çš„ï¼Œè¦æ±‚æ˜¯è‡ªå·±è¦åœ¨vscodeä¸­æ‰‹å†™è¿è¡Œä¸€éã€‚é’ˆå¯¹promiseè¿™ä¸€éƒ¨åˆ†å› ä¸ºå†…å®¹è¾ƒå¤šï¼Œåœ¨Promiseæ–‡æ¡£ä¸­è¿›è¡Œå•ç‹¬æ•´ç†



## é—®é¢˜1:å‡½æ•°æŸ¯é‡ŒåŒ–
::: details ğŸ’¡ è¯¦æƒ…

**æŸ¯é‡ŒåŒ–**æ˜¯ä»€ä¹ˆï¼šå°†å¤šå‚æ•°å‡½æ•°è½¬ä¸ºåˆ†æ­¥æ¥æ”¶å•å‚æ•°çš„å‡½æ•°é“¾
**å‚æ•°å¤ç”¨**ï¼šé€šè¿‡ç¼“å­˜éƒ¨åˆ†å‚æ•°ï¼Œç”Ÿæˆå¤ç”¨æ€§æ›´é«˜çš„æ–°å‡½æ•°ï¼Œé¿å…é‡å¤ä¼ å…¥ç›¸åŒå‚æ•°ã€‚
**æœ¬è´¨**ï¼šæŠŠå¤šå‚æ•°å‡½æ•°è½¬åŒ–ä¸ºå•å‚æ•°å‡½æ•°é“¾ï¼Œæ¯ä¸€æ­¥ä¼ å‚åè¿”å›æ–°å‡½æ•°ï¼Œç›´åˆ°å‚æ•°å…¨éƒ¨ä¼ å…¥æ‰æ‰§è¡Œè®¡ç®—ã€‚
:::
```js
// é€šç”¨æŸ¯é‡ŒåŒ–å‡½æ•°ï¼ˆé¢è¯•æœ€ä¼˜ç‰ˆï¼‰
function curry(fn) {
  // è·å–åŸå‡½æ•°å½¢å‚é•¿åº¦
  const argLength = fn.length;

  // é€’å½’æ¥æ”¶å‚æ•°çš„æ ¸å¿ƒå‡½æ•°
  const curried = function(...args) {
    // 1. å‚æ•°è¶³å¤Ÿï¼šæ‰§è¡ŒåŸå‡½æ•°ï¼Œç»‘å®šthis
    if (args.length >= argLength) {
      return fn.apply(this, args);
    }
    // 2. å‚æ•°ä¸è¶³ï¼šè¿”å›æ–°å‡½æ•°ï¼Œç»§ç»­æ”¶å‚ï¼ˆä¿ç•™thisï¼‰
    return function(...newArgs) {
      return curried.apply(this, [...args, ...newArgs]);
    };
  };

  return curried;
}

// æµ‹è¯•ç”¨ä¾‹ï¼ˆé¢è¯•æ—¶å¯é™„å¸¦ï¼Œä½“ç°è€ƒè™‘å…¨é¢ï¼‰
function sum(a, b, c) {
  return a + b + c;
}
const curriedSum = curry(sum);
console.log(curriedSum(1)(2)(3)); // 6
console.log(curriedSum(1,2)(3)); // 6
console.log(curriedSum(1)(2,3)); // 6

// æµ‹è¯•thisç»‘å®š
const obj = { base: 10, add: sum };
const curriedAdd = curry(obj.add).bind(obj);
console.log(curriedAdd(1)(2)(3)); // 16ï¼ˆ10+1+2+3ï¼‰
```



## é—®é¢˜2:LURç¼“å­˜
::: details ğŸ’¡ LURè¯¦æƒ…

LRU(Least Recently Usedï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨)æ˜¯ä¸€ç§ç¼“å­˜æ·˜æ±°ç­–ç•¥
**æ ¸å¿ƒè§„åˆ™**æ˜¯ï¼šå½“ç¼“å­˜ç©ºé—´è¾¾åˆ°ä¸Šé™æ—¶ï¼Œä¼˜å…ˆæ·˜æ±°æœ€è¿‘æœ€å°‘è¢«è®¿é—® / ä½¿ç”¨çš„ç¼“å­˜é¡¹ï¼Œä¿è¯ç¼“å­˜ä¸­ä¿ç•™çš„æ˜¯ã€Œæœ€å¸¸è¢«ä½¿ç”¨ã€çš„æ•°æ®ï¼Œä»è€Œæå‡ç¼“å­˜å‘½ä¸­ç‡ï¼ˆé«˜é¢‘æ•°æ®å¤§æ¦‚ç‡è¢«å†æ¬¡è®¿é—®ï¼‰ã€‚
è¿ç”¨ï¼šæµè§ˆå™¨ç¼“å­˜ç­–ç•¥ã€keep-alive

:::

## é—®é¢˜3:æ·±æ‹·è´
æµ…æ‹·è´åªèµ‹å€¼å¯¹è±¡çš„ç¬¬ä¸€å±‚å±æ€§ï¼Œå¦‚æœå±æ€§å€¼æ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™èµ‹å€¼çš„æ˜¯å¼•ç”¨åœ°å€è€Œä¸æ˜¯å®é™…çš„å€¼ã€‚æ·±æ‹·è´ä¼šé€’å½’å¤åˆ¶å¯¹è±¡çš„æ‰€æœ‰å±‚çº§ï¼ŒåŒ…æ‹¬åµŒå¥—å¯¹è±¡ï¼Œç”Ÿæˆä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„æ–°å¯¹è±¡ã€‚ä¿®æ”¹æ–°å¯¹è±¡ä¸ä¼šå½±å“åŸå¯¹è±¡ã€‚
>**æ€è·¯**
>1.åˆ¤æ–­æ˜¯å¦ä¸ºå¼•ç”¨ç±»å‹ï¼Œéå¼•ç”¨ç±»å‹ç›´æ¥è¿”å›å€¼ï¼›
>2.åŒºåˆ† Array å’Œ Objectï¼Œåˆ›å»ºæ–°çš„ç©ºå®¹å™¨ï¼›
>3.éå†åŸå¯¹è±¡ / æ•°ç»„çš„è‡ªæœ‰å±æ€§ï¼Œé€’å½’æ‹·è´æ¯ä¸ªå±æ€§å€¼ï¼›
>4.è¿”å›æ–°çš„å®¹å™¨ã€‚

```js 
function deepClone(target) {
  // 1. éå¼•ç”¨ç±»å‹ï¼šç›´æ¥è¿”å›ï¼ˆnull ç‰¹æ®Šå¤„ç†ï¼Œtypeof null === 'object'ï¼‰
  if (typeof target !== 'object' || target === null) {
    return target;
  }

  // 2. åŒºåˆ† Array å’Œ Objectï¼Œåˆ›å»ºæ–°å®¹å™¨
  const cloneTarget = Array.isArray(target) ? [] : {};

  // 3. éå†è‡ªæœ‰å±æ€§ï¼ˆè·³è¿‡åŸå‹é“¾ï¼‰ï¼Œé€’å½’æ‹·è´
  for (let key in target) {
    if (target.hasOwnProperty(key)) {
      cloneTarget[key] = deepClone(target[key]);
    }
  }

  // 4. è¿”å›æ–°å¯¹è±¡/æ•°ç»„
  return cloneTarget;
}
```

## é—®é¢˜4:æ‰‹å†™bindã€callã€apply
### call
- ä½œç”¨ï¼šç«‹å³è°ƒç”¨å‡½æ•°ï¼Œå¹¶æŒ‡å®šå‡½æ•°å†…éƒ¨çš„ this æŒ‡å‘ã€‚
- è¯­æ³•ï¼š`fn.call(thisArg, arg1, arg2, ...)`
- æœ¬è´¨:`å‡½æ•°.call(xxx, arg1, arg2, ...) => xxx.å‡½æ•°(arg1, arg2, ...)`

åœ¨ç¡®è®¤thisçš„å€¼è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬çŸ¥é“**å¯¹è±¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œå‡½æ•°å†…çš„thisæŒ‡å‘å¯¹è±¡**ã€‚æ‰€ä»¥callæ–¹æ³•çš„**åŸç†å°±æ˜¯è®©ä¼ å…¥çš„å¯¹è±¡æ¥è°ƒç”¨å‡½æ•°ï¼Œä»è€Œå®ç°å‡½æ•°çš„thisæŒ‡å‘æ˜¾ç¤ºçš„å¯¹è±¡ã€‚**
```js
//é¦–å…ˆæ˜¯å°†callæ–¹æ³•æŒ‚è½½åœ¨å‡½æ•°åŸå‹ä¸Šï¼Œä½¿å¾—æ‰€æœ‰å‡½æ•°éƒ½èƒ½è®¿é—®åˆ°callæ–¹æ³•
Function.prototype.call = function(context,...args){
    context= context || window
    const key = Symbol()   //å› ä¸ºä¼ å…¥çš„å¯¹è±¡ï¼Œå¯èƒ½æœ‰å¾ˆå¤šå±æ€§ï¼Œä¸ºäº†é˜²æ­¢åŒåï¼Œä½¿ç”¨Symbol()å°±è¡Œå”¯ä¸€æ ‡è¯†
    context[key] = this  //è¿™ä¸€æ­¥æ“ä½œæ˜¯å…³é”®ï¼Œç­‰ä»·äºcontext[key] = å‡½æ•°greet,context.key(num1,num2)è¿™æ ·å¯¹è±¡ä¸‹å°±æœ‰å‡½æ•°greetã€‚
    //ä¹Ÿå°±æ˜¯è¯´åœ¨å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œå°†å‡½æ•°èµ‹å€¼ç»™è¿™ä¸ªå±æ€§context.key=greet
    const result = context[key](...args) //ç­‰ä»·context.key(...args)ï¼Œä¹Ÿå°±æ˜¯greet(...args)
    delete context[key] //åˆ é™¤greetå‡½æ•°
    return result
}


function greet(num1, num2) {
  console.log("æ˜¾å¼ç»‘å®šä¸­çš„this:", this);
  console.log("Hello, " + this.name);
  console.log(num1 + num2);
}
const person = { name: "æå››" };
greet.myCall(person, 5, 10); 
//è¾“å‡º æ˜¾å¼ç»‘å®šä¸­çš„this: {name: 'æå››', Symbol(): Æ’}
//     Hello, æå››
//     15
```


### applyæ–¹æ³•
- ä½œç”¨ï¼šç«‹å³è°ƒç”¨å‡½æ•°ï¼Œå¹¶æŒ‡å®šå‡½æ•°å†…éƒ¨çš„ this æŒ‡å‘ã€‚
- è¯­æ³•ï¼š`fn.apply(thisArg, [argsArray])`
- ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–ç±»æ•°ç»„å¯¹è±¡ï¼Œä½œä¸ºå‚æ•°åˆ—è¡¨ä¼ é€’ç»™å‡½æ•°ã€‚

```js
Function.prototype.call = function(context,args){
    context= context || window
    const key = Symbol()   
    context[key] = this  
    
    const result = context[key](args) //ä¸callçš„å·®åˆ«æ˜¯åœ¨è¿™é‡Œ
    delete context[key] //å¯¹è±¡ä¸‹çš„æ–°å¢å±æ€§
    return result
}
```

### bindæ–¹æ³•
bindæ–¹æ³•çš„å®ç°åŠæ³•å’Œä¹‹å‰ç±»å‹ï¼Œä¸»è¦åŒºåˆ«æ˜¯ä¹‹å‰æ˜¯**ç«‹å³æ‰§è¡Œ,è¿”å›ç»“æœ**,bindæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°
- ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œæ–°å‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶ï¼Œä¼šå°† this è®¾ç½®ä¸º bind çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚
- è¯­æ³•ï¼š`fn.bind(thisArg, arg1, arg2, ...)`
- è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œä¸ä¼šç«‹å³æ‰§è¡Œã€‚

```js
Function.prototype.myBind = function (ctx, ...args) {
  const fn = this
  return function (...newArgs) {
    fn.apply(ctx, [...args, ...newArgs])
    // fn.call(ctx, ...args, ...newArgs)
  }
}
```

## é—®é¢˜5:èŠ‚æµ
å‡½æ•°èŠ‚æµæ˜¯æŒ‡è§„å®šä¸€ä¸ªå•ä½æ—¶é—´ï¼Œåœ¨è¿™ä¸ªå•ä½æ—¶é—´å†…ï¼Œåªèƒ½æœ‰ä¸€æ¬¡è§¦å‘äº‹ä»¶çš„å›è°ƒå‡½æ•°æ‰§è¡Œï¼Œå¦‚æœåœ¨**åŒä¸€ä¸ªå•ä½æ—¶é—´å†…æŸäº‹ä»¶è¢«è§¦å‘å¤šæ¬¡ï¼Œåªæœ‰ä¸€æ¬¡èƒ½ç”Ÿæ•ˆ**ã€‚èŠ‚æµå¯ä»¥ä½¿ç”¨åœ¨scrollå‡½æ•°çš„äº‹ä»¶ç›‘å¬ä¸Šï¼Œé€šè¿‡äº‹ä»¶èŠ‚æµæ¥é™ä½äº‹ä»¶è°ƒç”¨çš„é¢‘ç‡ã€‚
> **æ€è·¯ï¼š**
> 1.è®°å½•ä¸Šä¸€æ¬¡æ‰§è¡Œçš„æ—¶é—´æˆ³ï¼›
> 2.æ¯æ¬¡è§¦å‘äº‹ä»¶æ—¶ï¼Œåˆ¤æ–­å½“å‰æ—¶é—´ - ä¸Šä¸€æ¬¡æ‰§è¡Œæ—¶é—´ â‰¥ å»¶è¿Ÿæ—¶é—´ï¼›
> 3.æ»¡è¶³æ¡ä»¶åˆ™æ‰§è¡Œå‡½æ•°ï¼Œå¹¶æ›´æ–°ä¸Šä¸€æ¬¡æ‰§è¡Œæ—¶é—´ã€‚
```js
function throttle(fn, delay) {
  // é—­åŒ…ç¼“å­˜ä¸Šä¸€æ¬¡æ‰§è¡Œæ—¶é—´
  let lastTime = 0;

  return function(...args) {
    // å½“å‰æ—¶é—´æˆ³
    const now = Date.now();
    // æ—¶é—´å·® â‰¥ å»¶è¿Ÿæ—¶é—´ï¼Œæ‰§è¡Œå‡½æ•°
    if (now - lastTime >= delay) {
      fn.apply(this, args);
      lastTime = now; // æ›´æ–°ä¸Šä¸€æ¬¡æ‰§è¡Œæ—¶é—´
    }
  };
}
```
## é—®é¢˜6:é˜²æŠ–
å‡½æ•°é˜²æŠ–æ˜¯æŒ‡åœ¨äº‹ä»¶è¢«è§¦å‘ n ç§’åå†æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™ n ç§’å†…äº‹ä»¶åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ã€‚è¿™å¯ä»¥ä½¿ç”¨åœ¨ä¸€äº›ç‚¹å‡»è¯·æ±‚çš„äº‹ä»¶ä¸Šï¼Œé¿å…å› ä¸ºç”¨æˆ·çš„å¤šæ¬¡ç‚¹å‡»å‘åç«¯å‘é€å¤šæ¬¡è¯·æ±‚ã€‚
```js
function debounce(fn, delay) {
  // é—­åŒ…ç¼“å­˜å®šæ—¶å™¨ID
  let timer = null;

  // è¿”å›åŒ…è£…åçš„å‡½æ•°
  return function(...args) {
    // æ¯æ¬¡è§¦å‘ï¼Œæ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨ï¼ˆé‡ç½®å»¶è¿Ÿï¼‰
    if (timer) clearTimeout(timer);
    // é‡æ–°è®¾ç½®å®šæ—¶å™¨ï¼Œå»¶è¿Ÿæ‰§è¡ŒåŸå‡½æ•°
    timer = setTimeout(() => {
      // ç»‘å®šthisï¼ˆæŒ‡å‘è§¦å‘äº‹ä»¶çš„DOMå…ƒç´ ï¼‰+ ä¼ é€’å‚æ•°
      fn.apply(this, args);
    }, delay);
  };
}
```
::: info é˜²æŠ–å’ŒèŠ‚æµçš„æœ¬è´¨åŒºåˆ«ï¼Ÿ
é˜²æŠ–:**å»¶è¿Ÿæ‰§è¡Œ+é‡ç½®å»¶è¿Ÿ**,å…³æ³¨æœ€åä¸€æ¬¡è§¦å‘
èŠ‚æµ:**å›ºå®šé¢‘ç‡æ‰§è¡Œ**,å…³æ³¨ã€Œé¢‘ç‡æ§åˆ¶ã€ï¼Œå³ä½¿é«˜é¢‘è§¦å‘ï¼Œä¹ŸæŒ‰å›ºå®šæ—¶é—´é—´éš”æ‰§è¡Œ
:::

## é—®é¢˜7:instanceofå®ç°
æ ¸å¿ƒè¦ææ‡‚instanceofçš„åº•å±‚é€»è¾‘ï¼š**åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Šæ˜¯å¦å­˜åœ¨æŸä¸ªæ„é€ å‡½æ•°çš„ prototype å±æ€§**ã€‚
```js
function myInstanceof(left, right) {
  // è¾¹ç•Œ1ï¼šleft ä¸º null/undefinedï¼Œç›´æ¥è¿”å› falseï¼ˆå¯¹é½åŸç”Ÿè¡Œä¸ºï¼‰
  if (left === null || left === undefined) return false;

  // è¾¹ç•Œ2ï¼šright ä¸æ˜¯å‡½æ•°ï¼ŒæŠ›å‡º TypeErrorï¼ˆå¯¹é½åŸç”Ÿè¡Œä¸ºï¼‰
  //rightæ˜¯æ„é€ å‡½æ•°ï¼ˆFunction/Array/Object/è‡ªå®šä¹‰ç±»ï¼‰
  if (typeof right !== 'function') {
    throw new TypeError('Right-hand side of \'instanceof\' is not an object');
  }

  // è¾¹ç•Œ3ï¼šright.prototype ä¸º nullï¼Œç›´æ¥è¿”å› falseï¼ˆé¿å…æ­»å¾ªç¯ï¼‰
  const prototype = right.prototype;
  if (prototype === null) return false;

  let proto = Object.getPrototypeOf(left);
  while (true) {
    if (!proto) return false;
    if (proto === prototype) return true;
    proto = Object.getPrototypeOf(proto);
  }
}
```
## é—®é¢˜9:è®¢é˜…æ¨¡å¼



