---
title: æ‰‹å†™é¢˜
date: 2025-11-27 17:24:35
permalink: /qian/write
# titleTag: 
categories:
  - å‰ç«¯
tags:
  - å‰ç«¯
---

è¿™ä¸ªæ–‡æ¡£ä¸»è¦æ˜¯é’ˆå¯¹å‰ç«¯çš„é¢è¯•æ‰‹å†™é¢˜è¿›è¡Œæ•´ç†çš„ï¼Œè¦æ±‚æ˜¯è‡ªå·±è¦åœ¨vscodeä¸­æ‰‹å†™è¿è¡Œä¸€éã€‚é’ˆå¯¹promiseè¿™ä¸€éƒ¨åˆ†å› ä¸ºå†…å®¹è¾ƒå¤šï¼Œåœ¨Promiseæ–‡æ¡£ä¸­è¿›è¡Œå•ç‹¬æ•´ç†



## é—®é¢˜1:å‡½æ•°æŸ¯é‡ŒåŒ–
::: details ğŸ’¡ è¯¦æƒ…

**æŸ¯é‡ŒåŒ–**æ˜¯ä»€ä¹ˆï¼šå°†å¤šå‚æ•°å‡½æ•°è½¬ä¸ºåˆ†æ­¥æ¥æ”¶å•å‚æ•°çš„å‡½æ•°é“¾
**å‚æ•°å¤ç”¨**ï¼šé€šè¿‡ç¼“å­˜éƒ¨åˆ†å‚æ•°ï¼Œç”Ÿæˆå¤ç”¨æ€§æ›´é«˜çš„æ–°å‡½æ•°ï¼Œé¿å…é‡å¤ä¼ å…¥ç›¸åŒå‚æ•°ã€‚

:::




## é—®é¢˜2:LURç¼“å­˜
::: details ğŸ’¡ LURè¯¦æƒ…

LRU(Least Recently Usedï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨)æ˜¯ä¸€ç§ç¼“å­˜æ·˜æ±°ç­–ç•¥
**æ ¸å¿ƒè§„åˆ™**æ˜¯ï¼šå½“ç¼“å­˜ç©ºé—´è¾¾åˆ°ä¸Šé™æ—¶ï¼Œä¼˜å…ˆæ·˜æ±°æœ€è¿‘æœ€å°‘è¢«è®¿é—® / ä½¿ç”¨çš„ç¼“å­˜é¡¹ï¼Œä¿è¯ç¼“å­˜ä¸­ä¿ç•™çš„æ˜¯ã€Œæœ€å¸¸è¢«ä½¿ç”¨ã€çš„æ•°æ®ï¼Œä»è€Œæå‡ç¼“å­˜å‘½ä¸­ç‡ï¼ˆé«˜é¢‘æ•°æ®å¤§æ¦‚ç‡è¢«å†æ¬¡è®¿é—®ï¼‰ã€‚
è¿ç”¨ï¼šæµè§ˆå™¨ç¼“å­˜ç­–ç•¥ã€keep-alive

:::

## é—®é¢˜3:æ·±æ‹·è´
## é—®é¢˜4:æ‰‹å†™bindã€callã€apply
### call
- ä½œç”¨ï¼šç«‹å³è°ƒç”¨å‡½æ•°ï¼Œå¹¶æŒ‡å®šå‡½æ•°å†…éƒ¨çš„ this æŒ‡å‘ã€‚
- è¯­æ³•ï¼š`fn.call(thisArg, arg1, arg2, ...)`
- æœ¬è´¨:`å‡½æ•°.call(xxx, arg1, arg2, ...) => xxx.å‡½æ•°(arg1, arg2, ...)`


åœ¨ç¡®è®¤thisçš„å€¼è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬çŸ¥é“**å¯¹è±¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œå‡½æ•°å†…çš„thisæŒ‡å‘å¯¹è±¡**ã€‚æ‰€ä»¥callæ–¹æ³•çš„**åŸç†å°±æ˜¯è®©ä¼ å…¥çš„å¯¹è±¡æ¥è°ƒç”¨å‡½æ•°ï¼Œä»è€Œå®ç°å‡½æ•°çš„thisæŒ‡å‘æ˜¾ç¤ºçš„å¯¹è±¡ã€‚**
```js
//é¦–å…ˆæ˜¯å°†callæ–¹æ³•æŒ‚è½½åœ¨å‡½æ•°åŸå‹ä¸Šï¼Œä½¿å¾—æ‰€æœ‰å‡½æ•°éƒ½èƒ½è®¿é—®åˆ°callæ–¹æ³•
Function.prototype.call = function(context,...args){
    context= context || window
    const key = Symbol()   //å› ä¸ºä¼ å…¥çš„å¯¹è±¡ï¼Œå¯èƒ½æœ‰å¾ˆå¤šå±æ€§ï¼Œä¸ºäº†é˜²æ­¢åŒåï¼Œä½¿ç”¨Symbol()å°±è¡Œå”¯ä¸€æ ‡è¯†
    context[key] = this  //è¿™ä¸€æ­¥æ“ä½œæ˜¯å…³é”®ï¼Œç­‰ä»·äºcontext[key] = å‡½æ•°greet,context.key(num1,num2)è¿™æ ·å¯¹è±¡ä¸‹å°±æœ‰å‡½æ•°greetã€‚
    //ä¹Ÿå°±æ˜¯è¯´åœ¨å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œå°†å‡½æ•°èµ‹å€¼ç»™è¿™ä¸ªå±æ€§context.key=greet
    const result = context[key](...args) //ç­‰ä»·context.key(...args)ï¼Œä¹Ÿå°±æ˜¯greet(...args)
    delete context[key] //åˆ é™¤greetå‡½æ•°
    return result
}


function greet(num1, num2) {
  console.log("æ˜¾å¼ç»‘å®šä¸­çš„this:", this);
  console.log("Hello, " + this.name);
  console.log(num1 + num2);
}
const person = { name: "æå››" };
greet.myCall(person, 5, 10); 
//è¾“å‡º æ˜¾å¼ç»‘å®šä¸­çš„this: {name: 'æå››', Symbol(): Æ’}
//     Hello, æå››
//     15
```


### applyæ–¹æ³•
- ä½œç”¨ï¼šç«‹å³è°ƒç”¨å‡½æ•°ï¼Œå¹¶æŒ‡å®šå‡½æ•°å†…éƒ¨çš„ this æŒ‡å‘ã€‚
- è¯­æ³•ï¼š`fn.apply(thisArg, [argsArray])`
- ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–ç±»æ•°ç»„å¯¹è±¡ï¼Œä½œä¸ºå‚æ•°åˆ—è¡¨ä¼ é€’ç»™å‡½æ•°ã€‚

```js
Function.prototype.call = function(context,args){
    context= context || window
    const key = Symbol()   
    context[key] = this  
    
    const result = context[key](args) //ä¸callçš„å·®åˆ«æ˜¯åœ¨è¿™é‡Œ
    delete context[key] //å¯¹è±¡ä¸‹çš„æ–°å¢å±æ€§
    return result
}
```

### bindæ–¹æ³•
bindæ–¹æ³•çš„å®ç°åŠæ³•å’Œä¹‹å‰ç±»å‹ï¼Œä¸»è¦åŒºåˆ«æ˜¯ä¹‹å‰æ˜¯**ç«‹å³æ‰§è¡Œ,è¿”å›ç»“æœ**,bindæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°
- ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œæ–°å‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶ï¼Œä¼šå°† this è®¾ç½®ä¸º bind çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚
- è¯­æ³•ï¼š`fn.bind(thisArg, arg1, arg2, ...)`
- è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œä¸ä¼šç«‹å³æ‰§è¡Œã€‚

```js
Function.prototype.myBind = function (ctx, ...args) {
  const fn = this
  return function (...newArgs) {
    fn.apply(ctx, [...args, ...newArgs])
    // fn.call(ctx, ...args, ...newArgs)
  }
}
```

## é—®é¢˜5:èŠ‚æµ
## é—®é¢˜6:é˜²æŠ–
## é—®é¢˜7:instanceofå®ç°

## é—®é¢˜9:è®¢é˜…æ¨¡å¼
## é—®é¢˜6:é˜²æŠ–


