---
title: 生命周期
date: 2025-11-27 17:24:35
permalink: /vue/生命周期
# titleTag: 
categories:
  - Vue
tags:
  - vue
---

## 生命周期有哪些阶段？
Vue 的生命周期分为**创建阶段、挂载阶段、更新阶段和销毁阶段**。**创建阶段**包括 beforeCreate 和 created 钩子函数，在组件创建时触发。
**挂载阶段**有 beforeMount 和 mounted 钩子函数，在组件挂载到 DOM 时触发。
**更新阶段**是当数据变化时触发，包括 beforeUpdate 和 updated 钩子函数。
**销毁阶段**有 beforeDestroy 和 destroyed 钩子函数，在组件销毁时触发。

![生命周期](/vue/生命周期.png)

#### **初始化阶段：created**
实例创建完成，实例上配置的options包括 data、`computed`、`watch`、`methods`等都配置完成，但是此时渲染得节点还未挂载到 DOM，所以不能访问到 $el 属性。

| 维度           | 详情                                                         |
| -------------- | ------------------------------------------------------------ |
| 对应组合式 API | -（`setup` 覆盖此阶段，`setup` 执行时机早于 `created`）      |
| 核心作用       | 组件实例的**数据、方法、计算属性等已初始化**，可通过 `this` 访问，但**真实 DOM 未生成**（不能操作 DOM）。 |
| 常见场景       | 初始化数据、提前处理请求参数（但不建议在此发请求，因 DOM 未挂载）。 |



#### 挂载前：beforeMount（选项式）

| 维度       | 详情                                                         |
| ---------- | ------------------------------------------------------------ |
| 选项式 API | `beforeMount`                                                |
| 组合式 API | `onBeforeMount`                                              |
| 核心作用   | 虚拟 DOM 已生成，但**真实 DOM 还未挂载到页面**，此时无法操作真实 DOM。 |
| 注意事项   | 仅能做虚拟 DOM 相关的预操作，不涉及真实 DOM 交互。           |

#### 挂载后：mounted（选项式）

| 维度       | 详情                                                         |
| ---------- | ------------------------------------------------------------ |
| 选项式 API | `mounted`                                                    |
| 组合式 API | `onMounted`                                                  |
| 核心作用   | **真实 DOM 已完全挂载到页面**，可安全操作 DOM（如获取节点、初始化第三方库），也可发起异步请求。 |
| 注意事项   | 是「首次操作 DOM + 发请求」的核心阶段，但避免在此做大量同步计算（会阻塞页面渲染）。 |


### 1.一般在哪个生命周期请求异步数据?
一般在钩子函数 created、beforeMount、mounted 中进行调用，默认直接写等同于created阶段。在这三个阶段数据已经初始化完成，可以将服务端端返回的数据进行赋值。

推荐created 钩子函数中调用异步请求有以下优点：
- 能更快获取到服务端数据，减少页面加载时间，用户体验更好；
- SSR不支持 beforeMount 、mounted 钩子函数，放在 created 中有助于一致性。

### 2.vue3的生命周期，项目中在onMounted阶段做了什么？
Vue3 项目中onMounted核心做**DOM相关操作**、**异步数据请求（需操作 DOM 时）**、**第三方插件初始化**、**监听 DOM 事件**，且仅在组件挂载（DOM 渲染完成）后执行一次，是确保 DOM 就绪后操作的核心钩子
