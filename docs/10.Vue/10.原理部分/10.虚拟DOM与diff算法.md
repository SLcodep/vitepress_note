---
title: 虚拟DOM与diff算法
date: 2025-11-27 17:24:35
permalink: /vue/虚拟DOM与diff算法
# titleTag: 
categories:
  - Vue
tags:
  - vue
---

> - 虚拟 DOM（Virtual DOM）是对真实 DOM 的抽象描述（JS 对象），核心**解决真实 DOM 操作成本高**的问题
> - diff 算法是虚拟 DOM 的核心配套逻辑，作用是**对比新旧虚拟 DOM 树，找出最小更新差异，最终只更新需要变化的真实 DOM**，本质是**用JS计算替代DOM操作，以空间换时间，提升渲染性能**

::: warning 避坑
**注意点1**：不要说虚拟DOM比真实DOM快：要**强调频繁更新场景下更稳定**，简单场景反而可能慢；
**注意点2**：不要混淆虚拟DOM和diff算法：虚拟DOM是数据结构，diff是对比算法，二者是配套关系。
:::

::: tip 
- 口语化回答
虚拟DOM本质是利用JS对象模拟真实DOM的结构，是因为真实DOM操作成本太高(频繁增删改会触发多次重排重绘)，而虚拟DOM能把多次DOM操作转换成**一次JS计算+一次批量更新**，同时还能实现跨平台。
diff是虚拟DOM的核心，它的核心逻辑是同层对比，不会跨层比较。对比的时候会先看**节点类型**，如果类型不一样就直接重建；类型一样的话，先复用节点，再对比属性；列表节点则通过key精准匹配，避免复用错误，减少节点的销毁和重建。
:::
